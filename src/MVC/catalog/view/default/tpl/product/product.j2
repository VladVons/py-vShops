{% extends '_inc/layout1.j2' %}

{% block content %}
<!-- product + -->
<script>
    const gData = {
        "lang": {
            "added_to_cart": "{{lang.added_to_card}}",
            "already_in_cart": "{{lang.already_in_cart}}"
        }
    }
</script>

<div class="container pb-2">
    <div class="row vProduct">
        <div class="col-md-6 text-center vBgMaster">
            <div class="vProductImg">
                <img class="border mt-2" src="{{product.image}}" id="viMainImg" alt="{{product.title}}">
            </div>
            <div class="border-top mt-3 vProductThumbs_X">
                {% for xImage in product.images %}
                <img src="{{xImage}}" class="img-thumbnail" onclick="changeImage(this)" alt="{{product.title}}">
                {% endfor %}
            </div>
        </div>

        <div class="col-md-6 p-3 vBgSlave">
            <div class="d-flex justify-content-between p-2">
                <i class="fa fa-heart"></i>
                <span>{{lang.code}}: {{product.idt}}/{{product.id}}</span>
            </div>

            <h3>{{product.title}}</h3>
            <p>{{lang.category}}: <a href="#">{{product.category}}</a></p>
            <p>{{lang.available}}: 2</p>
            <p>{{lang.seller}}: <a href="{{href.tenant}}">{{product.tenant_title}}</a></p>

            {% set ns = namespace(Price=0) %}
            {% for Rec in TDbList().Import(product.price) %}
                {%- if Rec.price_new -%}
                    {% set ns.Price = Rec.price_new %}
                    <p class="h3 text-danger">{{Rec.price}} грн</p>
                    <p>
                        <span class="h3 text-decoration-line-through">{{Rec.qty}}{{lang.qty}} {{Rec.price}} грн</span>
                        {{ "%.1f"|format(100-(Rec.price_new/Rec.price*100)) }}%
                    </p>
                {%- else -%}
                    {% set ns.Price = Rec.price %}
                    <p class="h3">{{Rec.price}} грн</p>
                {%- endif %}
            {% endfor %}
            <button type="button" class="btn btn-primary mt-3 viAddToCart" data-name="{{product.title}}" data-price="{{ns.Price}}" data-img="{{product.image}}">
                <i class="fa fa-shopping-cart m-1"></i>{{lang.add_to_card}}
            </button>
        </div>
    </div>

    <div class="row vBgMaster mt-1">
        <ul class="nav nav-tabs pt-3" id="productTabs" role="tablist">
            <li class="nav-item">
                    <a class="nav-link active" id="features-tab" data-bs-toggle="tab" href="#features" role="tab" aria-controls="features" aria-selected="true">{{lang.features}}</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="details-tab" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="false">{{lang.description}}</a>
            </li>
        </ul>

        <div class="tab-content mt-1">
            <div class="tab-pane fade show active m-3" id="features" role="tabpanel" aria-labelledby="features-tab">
                <div class="vFeatures mt-2">
                {%- for xType, xVal in product.features %}
                    {%- if xType == 'g' -%}
                        <h4 class="fw-bold">{{xVal}}</h4>
                    {%- else -%}
                        <p>{{xVal}}</p>
                    {%- endif %}
                {%- endfor %}
                </div>
            </div>

            <div class="tab-pane fade" id="details" role="tabpanel" aria-labelledby="details-tab">
                {{product.descr}}
            </div>
        </div>
    </div>
</div>
<!-- product - -->
{% endblock %}
